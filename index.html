<!DOCTYPE html>
<html>
<head>
    <title>测试邮件发送</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>
<h2>测试邮件发送</h2>
<input type="email" id="email" placeholder="输入测试邮箱">
<button onclick="testSignup()">发送测试邮件</button>

<script>
    const supabaseUrl = 'https://bwbohtprwnegbunrxnyj.supabase.co';
    const supabaseKey = 'sb_secret_eX7QAnN2MDxWZ6OHD8lRrQ_9FODCq83'; // 替换为你的key

    const supabase = window.supabase.createClient(supabaseUrl, supabaseKey);

    async function testSignup() {
        const email = document.getElementById('email').value;

        if (!email) {
            alert('请输入邮箱');
            return;
        }

        try {
            const { data, error } = await supabase.auth.signUp({
                email: email,
                password: 'testpassword123',
                options: {
                    emailRedirectTo: 'https://16220949.github.io/email-confirm'
                }
            });

            if (error) {
                alert('发送失败: ' + error.message);
            } else {
                alert('邮件已发送！请检查邮箱（包括垃圾邮件箱）');
                console.log('响应数据:', data);
            }
        } catch (err) {
            alert('错误: ' + err.message);
        }
    }
</script>
</body>
</html>
